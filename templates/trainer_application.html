<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply to Become a Trainer - Fit Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .application-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        .section-header {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .required {
            color: #dc3545;
        }
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }
    </style>
</head>
<body class="gradient-bg">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="application-card p-5">
                    <div class="text-center mb-4">
                        <h1 class="display-5 fw-bold text-primary">
                            <i class="fas fa-dumbbell me-3"></i>
                            Become a Fit Hub Trainer
                        </h1>
                        <p class="lead text-muted">Join our team of certified fitness professionals</p>
                    </div>

                    <div class="info-box">
                        <h5><i class="fas fa-info-circle me-2"></i>Application Process</h5>
                        <p class="mb-2">1. Submit your application with all required information</p>
                        <p class="mb-2">2. Our admin team will review your credentials</p>
                        <p class="mb-0">3. You'll be notified via email about the decision</p>
                    </div>

                    <form id="trainerApplicationForm">
                        <!-- Personal Information -->
                        <div class="mb-4">
                            <h4 class="section-header">
                                <i class="fas fa-user me-2"></i>Personal Information
                            </h4>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label">
                                        First Name <span class="required">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label">
                                        Last Name <span class="required">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">
                                        Email Address <span class="required">*</span>
                                    </label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">
                                        Phone Number <span class="required">*</span>
                                    </label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="dateOfBirth" class="form-label">Date of Birth</label>
                                    <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="gender" class="form-label">Gender</label>
                                    <select class="form-control" id="gender" name="gender">
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                        <option value="prefer-not-to-say">Prefer not to say</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">
                                    Password <span class="required">*</span>
                                </label>
                                <input type="password" class="form-control" id="password" name="password" required>
                                <div class="form-text">Password will be used for your trainer account if approved</div>
                            </div>
                        </div>

                        <!-- Professional Information -->
                        <div class="mb-4">
                            <h4 class="section-header">
                                <i class="fas fa-briefcase me-2"></i>Professional Information
                            </h4>
                            <div class="mb-3">
                                <label for="experience" class="form-label">
                                    Experience <span class="required">*</span>
                                </label>
                                <textarea class="form-control" id="experience" name="experience" rows="3" 
                                    placeholder="Describe your fitness training experience, years in the field, types of clients you've worked with, etc." required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="certifications" class="form-label">
                                    Certifications <span class="required">*</span>
                                </label>
                                <textarea class="form-control" id="certifications" name="certifications" rows="3" 
                                    placeholder="List your fitness certifications (e.g., NASM-CPT, ACSM-CPT, ACE, etc.)" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="specializations" class="form-label">Specializations</label>
                                <textarea class="form-control" id="specializations" name="specializations" rows="2" 
                                    placeholder="Your areas of expertise (e.g., Weight Loss, Strength Training, Yoga, Nutrition, etc.)"></textarea>
                            </div>
                        </div>

                        <!-- Additional Information -->
                        <div class="mb-4">
                            <h4 class="section-header">
                                <i class="fas fa-heart me-2"></i>About You
                            </h4>
                            <div class="mb-3">
                                <label for="bio" class="form-label">Professional Bio</label>
                                <textarea class="form-control" id="bio" name="bio" rows="3" 
                                    placeholder="Tell us about yourself, your training philosophy, and what makes you unique as a trainer"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="motivation" class="form-label">Why do you want to join Fit Hub?</label>
                                <textarea class="form-control" id="motivation" name="motivation" rows="3" 
                                    placeholder="What motivates you to become a trainer on our platform?"></textarea>
                            </div>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="mb-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                                <label class="form-check-label" for="terms">
                                    I agree to the <a href="#" class="text-primary">Terms and Conditions</a> and 
                                    <a href="#" class="text-primary">Privacy Policy</a> <span class="required">*</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="accuracy" name="accuracy" required>
                                <label class="form-check-label" for="accuracy">
                                    I certify that all information provided is accurate and truthful <span class="required">*</span>
                                </label>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>
                                Submit Application
                            </button>
                        </div>
                    </form>

                    <!-- Status Check -->
                    <div class="mt-5 pt-4 border-top">
                        <h5 class="text-center mb-3">Check Application Status</h5>
                        <div class="row justify-content-center">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input type="email" class="form-control" id="statusEmail" 
                                        placeholder="Enter your email">
                                    <button class="btn btn-outline-primary" type="button" id="checkStatusBtn">
                                        <i class="fas fa-search me-1"></i>Check Status
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div id="statusResult" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-check-circle me-2"></i>Application Submitted!
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Thank you for your interest in becoming a Fit Hub trainer!</p>
                    <p>Your application has been submitted successfully and is now under review by our admin team.</p>
                    <p><strong>What happens next:</strong></p>
                    <ul>
                        <li>Our team will review your credentials and experience</li>
                        <li>You'll receive an email notification about the decision</li>
                        <li>If approved, you'll get access to your trainer dashboard</li>
                    </ul>
                    <p class="mb-0">You can check your application status anytime using the form below.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Got it!</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Form submission
        document.getElementById('trainerApplicationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());
            
            // Validate required fields
            const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'password', 'experience', 'certifications'];
            for (let field of requiredFields) {
                if (!data[field]) {
                    alert(`Please fill in the ${field} field`);
                    return;
                }
            }
            
            if (!data.terms || !data.accuracy) {
                alert('Please accept the terms and conditions');
                return;
            }
            
            try {
                const response = await fetch('/trainer/apply', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Show success modal
                    const modal = new bootstrap.Modal(document.getElementById('successModal'));
                    modal.show();
                    
                    // Reset form
                    this.reset();
                } else {
                    alert('Error: ' + result.message);
                }
            } catch (error) {
                alert('Error submitting application: ' + error.message);
            }
        });
        
        // Status check
        document.getElementById('checkStatusBtn').addEventListener('click', async function() {
            const email = document.getElementById('statusEmail').value;
            const resultDiv = document.getElementById('statusResult');
            
            if (!email) {
                alert('Please enter your email address');
                return;
            }
            
            try {
                const response = await fetch(`/trainer/application-status/${encodeURIComponent(email)}`);
                const result = await response.json();
                
                if (result.success) {
                    const app = result.application;
                    const statusColors = {
                        'pending': 'warning',
                        'approved': 'success',
                        'rejected': 'danger'
                    };
                    
                    const statusIcons = {
                        'pending': 'clock',
                        'approved': 'check-circle',
                        'rejected': 'times-circle'
                    };
                    
                    let statusHtml = `
                        <div class="alert alert-${statusColors[app.status]} text-center">
                            <i class="fas fa-${statusIcons[app.status]} me-2"></i>
                            <strong>Status: ${app.status.toUpperCase()}</strong><br>
                            Applied: ${new Date(app.applied_at).toLocaleDateString()}
                    `;
                    
                    if (app.status === 'approved') {
                        statusHtml += `<br><span class="text-success">Congratulations! You can now login as a trainer.</span>`;
                    } else if (app.status === 'rejected') {
                        statusHtml += `<br><span class="text-danger">Reason: ${app.rejection_reason || 'Not specified'}</span>`;
                    } else {
                        statusHtml += `<br><span class="text-warning">Your application is under review.</span>`;
                    }
                    
                    statusHtml += `</div>`;
                    resultDiv.innerHTML = statusHtml;
                } else {
                    resultDiv.innerHTML = `
                        <div class="alert alert-info text-center">
                            <i class="fas fa-info-circle me-2"></i>
                            No application found for this email address.
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger text-center">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Error checking status: ${error.message}
                    </div>
                `;
            }
        });
    </script>
</body>
</html>